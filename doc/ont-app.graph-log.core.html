<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>ont-app.graph-log.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Graph-log</span> <span class="project-version">0.1.6-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction to graph-log</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ont-app</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graph-log</span></div></div></li><li class="depth-3 branch"><a href="ont-app.graph-log.archiving.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>archiving</span></div></a></li><li class="depth-3 branch current"><a href="ont-app.graph-log.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="ont-app.graph-log.levels.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>levels</span></div></a></li><li class="depth-3"><a href="ont-app.graph-log.ont.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ont</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="ont-app.graph-log.core.html#var-annotate.21"><div class="inner"><span>annotate!</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-archiving.3F"><div class="inner"><span>archiving?</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-clear-entries"><div class="inner"><span>clear-entries</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-compare-shared-entries"><div class="inner"><span>compare-shared-entries</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-default-log-level"><div class="inner"><span>default-log-level</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-empty-graph"><div class="inner"><span>empty-graph</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-entries"><div class="inner"><span>entries</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-entry-count"><div class="inner"><span>entry-count</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-find-divergence"><div class="inner"><span>find-divergence</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-ith-entry"><div class="inner"><span>ith-entry</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-level-priorities"><div class="inner"><span>level-priorities</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-level.3E.3D"><div class="inner"><span>level&gt;=</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-log.21"><div class="inner"><span>log!</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-log-graph"><div class="inner"><span>log-graph</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-log-reset.21"><div class="inner"><span>log-reset!</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-log-value.21"><div class="inner"><span>log-value!</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-ontology"><div class="inner"><span>ontology</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-query-log"><div class="inner"><span>query-log</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-remove-timestamps"><div class="inner"><span>remove-timestamps</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-remove-variant-values"><div class="inner"><span>remove-variant-values</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-report-divergence"><div class="inner"><span>report-divergence</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-search"><div class="inner"><span>search</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-search-backward"><div class="inner"><span>search-backward</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-search-forward"><div class="inner"><span>search-forward</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-set-level.21"><div class="inner"><span>set-level!</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-show"><div class="inner"><span>show</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-std-logging-message"><div class="inner"><span>std-logging-message</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-the"><div class="inner"><span>the</span></div></a></li><li class="depth-1"><a href="ont-app.graph-log.core.html#var-timestamp"><div class="inner"><span>timestamp</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">ont-app.graph-log.core</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-annotate.21"><h3>annotate!</h3><div class="usage"><code>(annotate! element &amp; args)</code></div><div class="doc"><pre class="plaintext">Side-effect, adds `args` to entry for `element` in log-graph
Where
  - `args` := [`predicate` `object`, ...]
  - `element` is an element of the log-graph</pre></div></div><div class="public anchor" id="var-archiving.3F"><h3>archiving?</h3><div class="usage"><code>(archiving?)</code><code>(archiving? g)</code></div><div class="doc"><pre class="plaintext">True iff archiving is enabled for `g`
Where:
- `g` is an IGraph being used as a log-graph (default [[log-graph]])
</pre></div></div><div class="public anchor" id="var-clear-entries"><h3>clear-entries</h3><div class="usage"><code>(clear-entries g)</code></div><div class="doc"><pre class="plaintext">Returns `g` with all entries removed
</pre></div></div><div class="public anchor" id="var-compare-shared-entries"><h3>compare-shared-entries</h3><div class="usage"><code>(compare-shared-entries g1 g2)</code></div><div class="doc"><pre class="plaintext">Returns an IGraph containing content shared between `g1` and `g2`
Where
  - `g1`, `g2` are @log-graph's from two different sessions.</pre></div></div><div class="public anchor" id="var-default-log-level"><h3>default-log-level</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-empty-graph"><h3>empty-graph</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-entries"><h3>entries</h3><div class="usage"><code>(entries)</code><code>(entries entry-type)</code><code>(entries g entry-type)</code></div><div class="doc"><pre class="plaintext">Returns [`entry-id`, ...] for `entry-type` in `g` ordered by :glog/executionOrder
Where
- `entry-id` is a KWI identifying a log event in `g`
- `g` is an optional IGraph supporting the logging ontology, (default log-graph)
  This is typically either the current log-graph or a copy of the log-grpah
  from a previous session.
- `entry-type` is :all or the ID of some entry type.
</pre></div></div><div class="public anchor" id="var-entry-count"><h3>entry-count</h3><div class="usage"><code>(entry-count)</code><code>(entry-count g)</code></div><div class="doc"><pre class="plaintext">Returns the number of entries in `g` (default @log-graph)
</pre></div></div><div class="public anchor" id="var-find-divergence"><h3>find-divergence</h3><div class="usage"><code>(find-divergence log1 log2)</code></div><div class="doc"><pre class="plaintext">Returns [`same&gt; [`e1&gt; `e2&gt;] for `log1` and `log2`
Where
  - `same&gt; := [`shared-event&gt;, ...]
  - `e1&gt;, `e2&gt; name events whose details differ between `log1&gt; and `log2&gt;
  - `log1&gt; `log2&gt; are @log-graph's from two different sessions, 
  typically reflecting some minor change in the same code base.</pre></div></div><div class="public anchor" id="var-ith-entry"><h3>ith-entry</h3><div class="usage"><code>(ith-entry i)</code><code>(ith-entry g i)</code></div><div class="doc"><pre class="plaintext">Returns [`entry-id` `description`] for ith execution order  in `g`
  (default @graph-log)
Where
- `entry-id` is keyword naming the entry
- `description` is the normal-form description of `entry-id` in `g`
- `g` is a log-graph (@log-graph by default)
</pre></div></div><div class="public anchor" id="var-level-priorities"><h3>level-priorities</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Caches level priorities, to inform `level&gt;=`
</pre></div></div><div class="public anchor" id="var-level.3E.3D"><h3>level&gt;=</h3><div class="usage"><code>(level&gt;= this-level that-level)</code></div><div class="doc"><pre class="plaintext">Returns true iff `this-level` has priority &gt;= `that-level`
Where
&lt;this-level&gt; e.g. :glog/INFO
&lt;that-level&gt; e.g. :glog/DEBUG
</pre></div></div><div class="public anchor" id="var-log.21"><h3>log!</h3><div class="usage"><code>(log! entry-type &amp; args)</code></div><div class="doc"><pre class="plaintext">Side-effect: adds an entry to log-graph for `id` minted per `entry-type` and `args`
Returns: `id` or nil (if no entry was made)
Where
- `id` is a KWI minted for `entry-type` and whatever `arg-kwi`s are of 
:rdf/type :glog/InformsUri in @log-graph.
- `entry-type` is a KWI
- `args` := [`arg-kwi` `value`, ...]
Note: Any issues relating to log levels should be handled before calling this
function.
</pre></div></div><div class="public anchor" id="var-log-graph"><h3>log-graph</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-log-reset.21"><h3>log-reset!</h3><div class="usage"><code>(log-reset!)</code><code>(log-reset! initial-graph)</code></div><div class="doc"><pre class="plaintext">Side-effect: resets @log-graph to `initial-graph`
Where
- &lt;initial-graph&gt; is an IGraph, informed by ont-app.graph-log.core/ontology
  - optional. Default is core/ontology.
</pre></div></div><div class="public anchor" id="var-log-value.21"><h3>log-value!</h3><div class="usage"><code>(log-value! entry-type value)</code><code>(log-value! entry-type other-args value)</code></div><div class="doc"><pre class="plaintext">Returns `value`
Side effect: logs &lt;id&gt; :glog/value `value`, plus `other-args` into log-graph
Where
- `entry-type` is a keyword naming the type of `entry`
- `value` is the value being logged before it's returned.
- `other-args` := [`p` `o`, ...]
- `entry` is an entry in @glog/log-graph
- `p` is a keyword naming a property of `entry`
- `o` is a value asserted for `p` s.t. [`entry` `p` `o`] in the log.
</pre></div></div><div class="public anchor" id="var-ontology"><h3>ontology</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-query-log"><h3>query-log</h3><div class="usage"><code>(query-log q)</code><code>(query-log g q)</code></div><div class="doc"><pre class="plaintext">Returns [`bmap`, ....] for `q` posed to optional `g`
Where
- `bmap` := {`var` `value`, ...} bindings to `q` posed to `g`
- `q` is a query in a format amenable to `g`
- `g` is an IGraph supporting the graph-log vocabulary (default @log-graph)
</pre></div></div><div class="public anchor" id="var-remove-timestamps"><h3>remove-timestamps</h3><div class="usage"><code>(remove-timestamps)</code><code>(remove-timestamps g)</code></div><div class="doc"><pre class="plaintext">Spurious difference between two logs
</pre></div></div><div class="public anchor" id="var-remove-variant-values"><h3>remove-variant-values</h3><div class="usage"><code>(remove-variant-values)</code><code>(remove-variant-values g)</code></div><div class="doc"><pre class="plaintext">Returns `g`, removing/replacing values which would naturally vary between sessions.
These would give rise to spurious differences between two otherwise identical
  logs. Timestamps are removed, and compiled objects are replaced with
  :compiled
Where
- `g` is an optional log-graph from the current or past sessions. Default
  is current @log-graph
</pre></div></div><div class="public anchor" id="var-report-divergence"><h3>report-divergence</h3><div class="usage"><code>(report-divergence g1 g2)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-search"><h3>search</h3><div class="usage"><code>(search inc-or-dec entry-test g c found q)</code></div><div class="doc"><pre class="plaintext">Returns [c found [previous-index]] for `entry-test` of `i`th  entry per `q` and inc-or-dec
  See also the IGraph docs for traversal functions.

  Where
  -  `c` is the (ignored) traversal context
  - `found` is nil or the first previous entry to pass `test`
  - `previous-index` decrements the head of `q`, or empty if found or `i` &lt; 0
  - `entry-test` := fn [g entry] -&gt; boolean
  - `q` := [`entry` or `i` [i] if still searching or [] if found. inc/dec-ing
    per iteration
  - `i` is the execution order to test
  - `inc-or-dec` :~ #{inc dec}, inc to search forward dec to search backward.
  - `entry` is the `i`th entry in `g`
  - `g` is a log-graph.
  - NOTE: typically this is used as a partial application over `test`
(igraph/traverse `log` (partial search-backward `test`)
                                 nil
                                 [`entry-id`])</pre></div></div><div class="public anchor" id="var-search-backward"><h3>search-backward</h3><div class="usage"><code>(search-backward test)</code><code>(search-backward test start)</code><code>(search-backward g test start)</code></div><div class="doc"><pre class="plaintext">Searches the log backward for a match to `test`, starting at `start`
Where
- `test` := fn [g entry] -&gt; boolean
- `start` is an integer indexing the (entries g) (default end of entries)
- `g` is the log-graph
</pre></div></div><div class="public anchor" id="var-search-forward"><h3>search-forward</h3><div class="usage"><code>(search-forward test)</code><code>(search-forward test start)</code><code>(search-forward g test start)</code></div><div class="doc"><pre class="plaintext">Searches the log forward for a match to `test` starting at `start`
Where
- `test` := fn [g entry] -&gt; boolean
- `start` is an integer indexing (entries g) (default 0)
- `g` is the log-graph
</pre></div></div><div class="public anchor" id="var-set-level.21"><h3>set-level!</h3><div class="usage"><code>(set-level! level)</code><code>(set-level! element level)</code></div><div class="doc"><pre class="plaintext">Side-effect, adds `args` to entry for `element` in log-graph
Where
  - `args` := [`predicate` `object`, ...]
  - `element` is an element of the log-graph</pre></div></div><div class="public anchor" id="var-show"><h3>show</h3><div class="usage"><code>(show entry-id)</code><code>(show entry-id p)</code><code>(show entry-id p o)</code></div><div class="doc"><pre class="plaintext">Returns contents of `entry-id` for optional `g` 
Where
- `entry-id` is the KWI of an entry
- `g` is a log-graph (default @log-graph)
</pre></div></div><div class="public anchor" id="var-std-logging-message"><h3>std-logging-message</h3><div class="usage"><code>(std-logging-message &amp; args)</code></div><div class="doc"><pre class="plaintext">Returns: a string suitable for standard logging based on `args`, or nil
  if there is no :glog/message specification.
Where
  - `args` := {`p` `o`, ....}
  - `p` is a keyword naming a property, possibly :glog/message
  - `o` is a value, known as `template` if `p` = :glog/message
  - `template` is a mustache-style template to which `desc-map` will be applied
  Of the form `yadda {{&lt;p&gt;}} yadda...'
  - `desc-map` := {`p` `o`, ...}, minus any :glog/message. Specifying `o`'s to be 
  inserted into `template`.</pre></div></div><div class="public anchor" id="var-the"><h3>the</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-timestamp"><h3>timestamp</h3><div class="usage"><code>(timestamp)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>